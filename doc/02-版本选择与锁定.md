# 版本选择与锁定（企业强制）

> [< 上一篇：系统架构](01-系统架构.md) | [返回目录](README.md) | [下一篇：同机部署网络拓扑 >](03-同机部署网络拓扑.md)

## 为什么必须锁定版本

LiteLLM 的接口/行为会随版本变化；使用 `main-latest` 会导致：
- 管理/统计接口路径变动，WordPress 插件与监控采集随时失效
- 指标名变化导致告警与仪表盘失真
- 生产事故难以回溯与复现

## 推荐策略

- **预生产先验收**：把你要的能力（Key 管理、UI、指标、成本/用量）跑通再上生产
- **生产锁定 tag**：`ghcr.io/berriai/litellm:vX.Y.Z`
- **更严格（可选）**：用镜像 digest 锁定（内部记录即可）

## 上线前验收清单（最低）

- `/health` 正常
- 你实际要用的 `/v1/...` endpoints 可用
- `/key/generate`、`/key/list`、`/key/block`、`/key/delete` 可用
- `/ui` 可访问（若需要被 iframe 嵌入，需验证 CSP/反代头）
- `/metrics`（若启用）可被 Prometheus 抓取

## 在本项目中如何落地

- 修改 `../docker-compose.core.yml` 中 LiteLLM 镜像：把 `vX.Y.Z` 替换为验收通过版本

